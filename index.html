 <!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>grow a garden</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: Arial, sans-serif; background-color: #111; color: #fff; }

    header {
      background-color: #1e1e1e;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #00b894;
    }

    .title { font-size: 24px; font-weight: bold; }

    .auth {
      display: flex;
      gap: 10px;
    }

    .auth input {
      padding: 6px;
      border-radius: 4px;
      border: none;
    }

    .auth button {
      padding: 6px 12px;
      background-color: #00b894;
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }

    .logout {
      background-color: #d63031;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      padding: 40px 20px;
    }

    .item-card {
      background-color: #222;
      border: 2px solid #333;
      border-radius: 10px;
      width: 280px;
      padding: 20px;
      transition: 0.3s;
    }

    .item-card:hover {
      border-color: #00b894;
    }

    .item-card img {
      width: 100%;
      border-radius: 6px;
      margin-bottom: 10px;
    }

    .item-card h3 { font-size: 20px; margin-bottom: 10px; }
    .item-card p { font-size: 14px; color: #bbb; margin-bottom: 10px; }
    .price { color: #00b894; font-weight: bold; font-size: 18px; margin-bottom: 10px; }

    .btn { background-color: #00b894; border: none; padding: 10px; width: 100%; color: white; font-size: 16px; border-radius: 6px; cursor: pointer; margin-bottom: 5px; }
    .btn:hover { background-color: #019875; }

    .admin-controls { margin-top: 10px; }
    .admin-controls input { width: 100%; padding: 5px; margin-bottom: 5px; border-radius: 4px; border: none; }

    .cart-toggle {
      position: fixed; bottom: 20px; right: 20px;
      background-color: #00b894; border: none; padding: 10px 20px;
      font-size: 16px; color: white; border-radius: 6px;
      cursor: pointer; z-index: 1000;
    }

    .cart {
      display: none; position: fixed; bottom: 0; left: 0;
      width: 100%; background-color: #1e1e1e;
      border-top: 2px solid #00b894; padding: 20px;
      text-align: center; z-index: 999;
    }

    .cart-item { margin-bottom: 10px; }
    .cart button { margin-left: 10px; }

    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ–ø–ª–∞—Ç—ã */
    .modal {
      display: none;
      position: fixed; 
      z-index: 2000;
      left: 0; top: 0; width: 100%; height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.7);
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background-color: #222;
      padding: 20px;
      border-radius: 8px;
      width: 300px;
      color: #fff;
    }
    .modal-content input {
      width: 100%;
      padding: 8px;
      margin: 10px 0;
      border-radius: 4px;
      border: none;
    }
    .modal-content button {
      background-color: #00b894;
      border: none;
      padding: 10px;
      width: 100%;
      color: white;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
    }
    .modal-content button:hover {
      background-color: #019875;
    }
    .close-btn {
      background-color: #d63031;
      margin-top: 10px;
    }

    /* –ë–ª–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –∞–¥–º–∏–Ω–æ–º */
    #adminAddItem {
      max-width: 280px; 
      margin: 20px auto; 
      background:#222; 
      padding:15px; 
      border-radius:10px;
      display: none;
    }
    #adminAddItem h3 {
      color: #00b894;
      margin-bottom: 10px;
    }
    #adminAddItem input {
      width: 100%;
      margin-bottom: 8px;
      padding: 6px;
      border-radius: 4px;
      border: none;
      color: #000;
    }
    #imagePreview {
      margin-top: 10px;
      text-align: center;
      display: none;
    }
    #imagePreview img {
      max-width: 100%;
      max-height: 150px;
      border-radius: 6px;
    }
  </style>
</head>
<body>

<header>
  <div class="title">grow a garden shop</div>
  <div class="auth" id="authPanel">
    <input type="text" id="username" placeholder="–ò–º—è" />
    <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" />
    <button onclick="login()">–í—Ö–æ–¥</button>
    <button onclick="register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
  </div>
  <div class="auth" id="logoutPanel" style="display:none;">
    <span id="greeting"></span>
    <button class="logout" onclick="logout()">–í—ã–π—Ç–∏</button>
  </div>
</header>

<div class="container" id="itemContainer"></div>

<!-- –ë–ª–æ–∫ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ (–≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É) -->
<div id="adminAddItem">
  <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h3>
  <input type="text" id="newItemName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" />
  <input type="number" id="newItemPrice" placeholder="–¶–µ–Ω–∞" />
  <input type="number" id="newItemStock" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ" />
  <input type="text" id="newItemImage" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, https://...)" oninput="showPreview()" />
  <div id="imagePreview">
    <img src="" alt="–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" />
  </div>
  <button class="btn" onclick="addNewItem()">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
</div>

<button class="cart-toggle" onclick="toggleCart()">–ö–æ—Ä–∑–∏–Ω–∞</button>
<div class="cart" id="cart">
  <h2>üõí –ö–æ—Ä–∑–∏–Ω–∞</h2>
  <div id="cartItems"></div>
  <button onclick="openPaymentModal()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã -->
<div id="paymentModal" class="modal">
  <div class="modal-content">
    <h3>–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞</h3>
    <input type="text" id="cardNumber" placeholder="–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã (16 —Ü–∏—Ñ—Ä)" maxlength="16" />
    <input type="text" id="cardExpiry" placeholder="–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (MM/–ì–ì)" maxlength="5" />
    <input type="text" id="cardCVC" placeholder="CVC (3 —Ü–∏—Ñ—Ä—ã)" maxlength="3" />
    <button onclick="processPayment()">–û–ø–ª–∞—Ç–∏—Ç—å</button>
    <button class="close-btn" onclick="closePaymentModal()">–û—Ç–º–µ–Ω–∞</button>
  </div>
</div>

<script>
  const users = {};
  const userCarts = {};
  let cart = [];
  let cartVisible = false;
  let currentUser = null;
  const items = [
    { name: "–ú–µ—á –ü–ª–∞–º–µ–Ω–∏", price: 350, stock: 0, image: "img/sword.jpg" },
    { name: "–©–∏—Ç –ó–∞—â–∏—Ç—ã", price: 250, stock: 0, image: "img/shield.jpg" },
    { name: "–õ—É–∫ –¢–æ—á–Ω–æ—Å—Ç–∏", price: 400, stock: 0, image: "img/bow.jpg" }
  ];

  function toggleCart() {
    cartVisible = !cartVisible;
    document.getElementById('cart').style.display = cartVisible ? 'block' : 'none';
  }

  function register() {
    const name = document.getElementById('username').value.trim();
    const pass = document.getElementById('password').value.trim();
    if (!name || !pass) return alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è');
    if (users[name]) return alert('–¢–∞–∫–æ–π –∞–∫–∫–∞—É–Ω—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
    users[name] = { password: pass };
    alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞');
  }

  function login() {
    const name = document.getElementById('username').value.trim();
    const pass = document.getElementById('password').value.trim();
    if (!users[name] || users[name].password !== pass) return alert('–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ');
    if (currentUser) userCarts[currentUser] = cart;
    currentUser = name;
    cart = userCarts[currentUser] || [];
    document.getElementById('authPanel').style.display = 'none';
    document.getElementById('logoutPanel').style.display = 'flex';
    document.getElementById('greeting').innerText = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, ${name}`;
    renderItems();
    updateCart();
  }

  function logout() {
    if (currentUser) userCarts[currentUser] = cart;
    currentUser = null;
    cart = [];
    document.getElementById('authPanel').style.display = 'flex';
    document.getElementById('logoutPanel').style.display = 'none';
    renderItems();
    updateCart();
  }

  function addToCart(name, price) {
    if (!currentUser) return alert("–í–æ–π–¥–∏—Ç–µ –¥–ª—è –ø–æ–∫—É–ø–æ–∫");
    const itemData = items.find(item => item.name === name);

    const inCart = cart.reduce((sum, item) => item.name === name ? sum + item.quantity : sum, 0);
    if (inCart >= itemData.stock) {
      return alert("–í—ã –¥–æ–±–∞–≤–∏–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞");
    }

    const existing = cart.find(item => item.name === name);
    if (existing) {
      existing.quantity++;
    } else {
      cart.push({ name, price, quantity: 1 });
    }

    updateCart();
  }

  function removeFromCart(index) {
    cart.splice(index, 1);
    updateCart();
  }

  // –û—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã
  function openPaymentModal() {
    if (!currentUser) return alert("–í–æ–π–¥–∏—Ç–µ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞");
    if (cart.length === 0) return alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞");
    document.getElementById('paymentModal').style.display = 'flex';
  }

  // –ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã
  function closePaymentModal() {
    document.getElementById('paymentModal').style.display = 'none';
  }

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–ª–∞—Ç—ã
  function processPayment() {
    const cardNumber = document.getElementById('cardNumber').value.trim();
    const cardExpiry = document.getElementById('cardExpiry').value.trim();
    const cardCVC = document.getElementById('cardCVC').value.trim();

    if (!/^\d{16}$/.test(cardNumber)) return alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –∏–∑ 16 —Ü–∏—Ñ—Ä");
    if (!/^\d{2}\/\d{2}$/.test(cardExpiry)) return alert("–í–≤–µ–¥–∏—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ MM/–ì–ì");
    if (!/^\d{3}$/.test(cardCVC)) return alert("–í–≤–µ–¥–∏—Ç–µ CVC –∏–∑ 3 —Ü–∏—Ñ—Ä");

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–∞
    for (let i = 0; i < cart.length; i++) {
      const itemInCart = cart[i];
      const itemData = items.find(item => item.name === itemInCart.name);
      if (itemInCart.quantity > itemData.stock) {
        alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ "${itemInCart.name}" –Ω–∞ —Å–∫–ª–∞–¥–µ`);
        return;
      }
    }

    // –°–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å–æ —Å–∫–ª–∞–¥–∞
    cart.forEach(cartItem => {
      const itemData = items.find(item => item.name === cartItem.name);
      itemData.stock -= cartItem.quantity;
      if (itemData.stock < 0) itemData.stock = 0;
    });

    cart = [];
    updateCart();
    renderItems();
    closePaymentModal();
    alert("–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É!");
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  function updateCart() {
    const container = document.getElementById('cartItems');
    container.innerHTML = "";
    if (cart.length === 0) {
      container.innerHTML = "<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>";
      return;
    }
    cart.forEach((item, i) => {
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `
        ${item.name} x${item.quantity} - ${item.price * item.quantity}$
        <button onclick="removeFromCart(${i})">–£–¥–∞–ª–∏—Ç—å</button>
      `;
      container.appendChild(div);
    });
  }

  // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
  function renderItems() {
    const container = document.getElementById('itemContainer');
    container.innerHTML = "";

    items.forEach(item => {
      const card = document.createElement('div');
      card.className = 'item-card';
      const stockText = item.stock > 0 ? `–í –Ω–∞–ª–∏—á–∏–∏: ${item.stock}` : "–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏";

      card.innerHTML = `
        <img src="${item.image}" alt="${item.name}" />
        <h3>${item.name}</h3>
        <p>${stockText}</p>
        <div class="price">${item.price}$</div>
        <button class="btn" onclick="addToCart('${item.name}', ${item.price})" ${item.stock === 0 ? "disabled" : ""}>–ö—É–ø–∏—Ç—å</button>
      `;

      // –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏ (–µ—Å–ª–∏ admin)
      if (currentUser === 'admin') {
        const adminDiv = document.createElement('div');
        adminDiv.className = 'admin-controls';
        adminDiv.innerHTML = `
          <button onclick="restockItem('${item.name}')">–ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å–∫–ª–∞–¥</button>
          <button onclick="removeItem('${item.name}')">–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
        `;
        card.appendChild(adminDiv);
      }

      container.appendChild(card);
    });

    // –ï—Å–ª–∏ –∞–¥–º–∏–Ω - –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
    if (currentUser === 'admin') {
      document.getElementById('adminAddItem').style.display = 'block';
    } else {
      document.getElementById('adminAddItem').style.display = 'none';
    }
  }

  function restockItem(name) {
    const qty = prompt("–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫–ª–∞–¥–∞:");
    const numQty = Number(qty);
    if (!numQty || numQty <= 0) return alert("–ù–µ–≤–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ");
    const item = items.find(i => i.name === name);
    item.stock += numQty;
    renderItems();
  }

  function removeItem(name) {
    const index = items.findIndex(i => i.name === name);
    if (index === -1) return;
    if (confirm(`–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä "${name}"?`)) {
      items.splice(index, 1);
      renderItems();
    }
  }

  // –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä (–¥–ª—è –∞–¥–º–∏–Ω–∞)
  function addNewItem() {
    const name = document.getElementById('newItemName').value.trim();
    const price = Number(document.getElementById('newItemPrice').value);
    const stock = Number(document.getElementById('newItemStock').value);
    const image = document.getElementById('newItemImage').value.trim();

    if (!name || !price || price <= 0 || !stock || stock < 0 || !image) {
      return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ");
    }

    if (items.find(i => i.name.toLowerCase() === name.toLowerCase())) {
      return alert("–¢–æ–≤–∞—Ä —Å —Ç–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç");
    }

    items.push({ name, price, stock, image });
    document.getElementById('newItemName').value = '';
    document.getElementById('newItemPrice').value = '';
    document.getElementById('newItemStock').value = '';
    document.getElementById('newItemImage').value = '';
    hidePreview();
    renderItems();
  }

  // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ URL
  function showPreview() {
    const url = document.getElementById('newItemImage').value.trim();
    const previewDiv = document.getElementById('imagePreview');
    const img = previewDiv.querySelector('img');

    if (url) {
      img.src = url;
      previewDiv.style.display = 'block';
    } else {
      hidePreview();
    }
  }
  function hidePreview() {
    const previewDiv = document.getElementById('imagePreview');
    const img = previewDiv.querySelector('img');
    img.src = '';
    previewDiv.style.display = 'none';
  }

  renderItems();
  updateCart();
</script>

</body>
</html>
<h1></h1>